Once we can send commands to AR.Drone, we can receive data from AR.Drone and look into which part of the data corresponds to the actual state of AR.Drone. First, we look into navigation data, called navdata.

AR.Drone sends navdata via UDP port 5554. On the first access from client on this port, drone starts to send navdata in bootstrap mode. In this mode, only data sequence number and and drone's status are sent, so as to obtain sensor values such as yaw, pitch, roll angles, or altitude, we have to stop this mode by sending a character string like, sprintf(command, "AT*CONFIG=%d,\"general:navdata_demo\",\"TRUE\"\r",seq++); to command port and drone will enter Navdata demo mode that is used by official iPhone app. Once this is done, drone will react to client's ack signal and continuously send navdata. This process is illustrated in SDK reference.

The content of navdata is illustrated as Figure.1. The header is always 0x55667788 and 32-bit integer that indicates the state of drone, navdata sequential number, and flag for tag detection. Drone's state is illustrated in Figure.2. (and more in detail in /ARDroneLib/Soft/Common/config.h of official SDK) Option blocks follow the header, and each option block commonly starts with option ID which indicates the type of content, and size of option block (probably in [byte]), and actual data of the option. In case of navdata_demo mode, the first option block contains ctrl_state (indicates such as landed, taking off etc.. see ARDroneLib/Soft/Common/control_states.h for its definition), battery voltage, pitch/roll/yaw angles, altitude, and estimated speed (in x, y and z direction). For other option blocks, please refer to ARDroneLib/Soft/Common/navdata_common.h of official SDK.


If drone does not receive any signal more than 50 milliseconds, then ARDRONE_COM_WATCHDOG_MASK bit is set. When the drone is in this mode, it does not accept any AT*PCMD command that is used to control drone by user devices but keep hovering on a fixed point. To quit this mode, the client must send AT*COMWDG command. Also, if drone did not receive any signal for more than 2000 milliseconds, then the drone stops all communication and set ARDRONE_COM_LOST_MASK and the client has to reinitialize the communication.
